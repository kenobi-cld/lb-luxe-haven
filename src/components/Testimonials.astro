---
interface Testimonial {
  id: string;
  testimonial: string;
  person?: string;
  occupation?: string;
}

interface Props {
  title?: string;
  description?: string;
  testimonials: Testimonial[];
}

const {
  title = "Testimonials",
  description,
  testimonials
} = Astro.props;
---

<section class="max-w-4xl mx-auto px-6 overflow-hidden">
  <!-- Header -->
  <header class="text-center mb-8 gsap-block">
    <h2 class="mona font-black mt-12 tracking-tight text-4xl">
      {title}
    </h2>

    {description && (
      <p class="grotesk font-medium mt-4 text-gray-700">
        {description}
      </p>
    )}
  </header>

  <div class="relative">
    <div class="testimonial-viewport overflow-hidden">
      <div class="testimonial-track flex">
        {testimonials.map((item) => (
          <article
            class="testimonial-slide shrink-0 w-full px-2"
          >
            <div class="bg-gray-100 rounded-2xl p-8 flex flex-col items-center">
              <p class="grotesk text-gray-700 leading-relaxed mb-6">
                “{item.testimonial}”
              </p>

              <div class="pt-2 ml-auto">
                {item.person && (
                  <p class="mona font-bold leading-none text-balance">
                    {item.person}
                  </p>
                )}
                {item.occupation && (
                  <p class="text-sm text-gray-500 mt-1">
                    {item.occupation}
                  </p>
                )}
              </div>
            </div>
          </article>
        ))}
      </div>
    </div>

    <!-- Controls -->
    <div class="flex justify-end gap-4 mt-4">
      <i
        class="testimonial-prev ti ti-arrow-left px-4 py-2 rounded cursor-pointer"
        aria-label="Previous testimonial"
      >
    </i>
      <i
        class="testimonial-next ti ti-arrow-right px-4 py-2 rounded cursor-pointer"
        aria-label="Next testimonial"
      >
  </i>
    </div>
  </div>
</section>

<script type="module" src="/src/scripts/testimonialCarousel.js"></script>
